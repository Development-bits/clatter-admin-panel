import{h as O,v as be,j as e,w as fe,d as s,x as Ne,L as N,y as S,I as g,z as k,A as $,D as ve,E as z,G as B,m as Y,U as D,H as G,M as ge,J as K,K as L,O as U,P as xe,Q as J,r as m,i as X,V as F,C as M,e as ee,W as Ce,l as ae,R,n as y,S as j,s as E,X as Se,Y as ye,Z as we,$ as Ae}from"./index.1e929f6f.js";import{S as Pe,a as Q,A as ke}from"./ActiveUser.94e3e82b.js";/* empty css                  */const _={email:"",firstName:"",lastName:"",userName:"",password:"",phoneNumber:""},Fe=(a,c,h)=>{for(const i in a)if(typeof a[i]=="object"){if(a[i]===null)return!1}else if(typeof a[i]=="string"&&(a[i].length===0||i==="password"&&(!c.test(a[i])||a[i].length<8)||i==="phoneNumber"&&(a[i].length<10||a[i].length>16)||i==="email"&&!h.test(a[i])))return!1;return!0},Te=({open:a,toggleSidebar:c})=>{const h=O(),{control:i,setValue:v,setError:n,handleSubmit:p,formState:{errors:o}}=be({defaultValues:_});return e(fe,{size:"lg",open:a,title:"New User",headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:c,onClosed:()=>{for(const t in _)v(t,"")},children:s(Ne,{onSubmit:p(t=>{const b=/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/,x=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;if(Fe(t,b,x))h(ve(t));else for(const r in t)t[r]===null&&n(r,{type:"manual"}),t[r]!==null&&t[r].length===0&&n(r,{type:"manual"}),r==="password"&&!b.test(t[r])&&n(r,{type:"Password must contain letters, numbers & periods"}),r==="password"&&t[r].length<8&&n(r,{type:"Password should be 8 characters or more"}),r==="phoneNumber"&&(t[r].length<10||t[r].length>16)&&n(r,{type:"Please check your contact number"}),r==="email"&&!x.test(t[r])&&n(r,{type:"manual"})}),children:[s("div",{className:"mb-1",children:[s(N,{className:"form-label",for:"userName",children:["Username ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"userName",control:i,render:({field:t})=>e(g,{id:"userName",placeholder:"johnDoe99",invalid:o.userName&&!0,...t})})]}),s("div",{className:"mb-1",children:[s(N,{className:"form-label",for:"firstName",children:["First Name ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"firstName",control:i,render:({field:t})=>e(g,{id:"firstName",placeholder:"John",invalid:o.firstName&&!0,...t})})]}),s("div",{className:"mb-1",children:[s(N,{className:"form-label",for:"lastName",children:["Last Name ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"lastName",control:i,render:({field:t})=>e(g,{id:"lastName",placeholder:"Doe",invalid:o.lastName&&!0,...t})})]}),s("div",{className:"mb-1",children:[s(N,{className:"form-label",for:"email",children:["Email ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"email",control:i,render:({field:t})=>e(g,{type:"email",id:"userEmail",placeholder:"john.doe@example.com",invalid:o.email&&!0,...t})}),o.email&&e(k,{color:"danger",children:o.email.type})]}),s("div",{className:"mb-1",children:[s(N,{className:"form-label",for:"password",children:["Password ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"password",control:i,render:({field:t})=>e(g,{type:"password",id:"password",placeholder:"********",invalid:o.password&&!0,...t})}),o.password?e(k,{color:"danger",children:o.password.type}):e(k,{color:"muted",children:"You can use letters, numbers & periods"})]}),s("div",{className:"mb-1",children:[s(N,{className:"form-label",for:"phoneNumber",children:["Contact ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"phoneNumber",control:i,render:({field:t})=>e(g,{id:"phoneNumber",placeholder:"(397) 294-5153",invalid:o.phoneNumber&&!0,...t})}),o.phoneNumber&&e(k,{color:"danger",children:o.phoneNumber.type})]}),e($,{type:"submit",className:"me-1",color:"primary",children:"ADD"}),e($,{type:"reset",color:"secondary",outline:!0,onClick:c,children:"Cancel"})]})})},ze=a=>{var c;return(c=a==null?void 0:a.avatar)!=null&&c.length?e(J,{className:"me-1",img:a.avatar,width:"32",height:"32"}):e(J,{initials:!0,className:"me-1",color:a.avatarColor||"light-primary",content:a.fullName||"John Doe"})},q={active:"light-success",deactivated:"light-warning",inactive:"light-secondary",banned:"light-danger"},je=[{name:"User",sortable:!0,minWidth:"300px",sortField:"fullName",selector:a=>a.firstName+a.lastName,cell:a=>s("div",{className:"d-flex justify-content-left align-items-center",children:[ze(a),s("div",{className:"d-flex flex-column",children:[e(z,{to:`/user/view/${a.id}`,className:"user_name text-truncate text-body",children:s("span",{className:"fw-bolder",children:[a.firstName," ",a.lastName]})}),e("small",{className:"text-truncate text-muted mb-0",children:a.email})]})]})},{name:"User Status",sortable:!0,minWidth:"130px",sortField:"userStatus",selector:a=>a.userStatus,cell:a=>e(B,{className:"text-capitalize d-flex flex-column",color:q[a.userStatus],pill:!0,children:e("span",{className:"text-capitalize",children:a.userStatus})})},{name:"Plan",minWidth:"135px",sortable:!0,sortField:"currentPlan",selector:a=>a.plan,cell:a=>e("span",{className:"text-capitalize",children:a.plan})},{name:"Subscription Status",minWidth:"140px",sortable:!0,sortField:"subscription",selector:a=>a.subscriptionStatus,cell:a=>e(B,{className:"text-capitalize d-flex flex-column",color:q[a.subscriptionStatus],pill:!0,children:e("span",{className:"text-capitalize",children:a.subscriptionStatus})})},{name:"Created At",minWidth:"140px",sortable:!0,sortField:"createdAt",selector:a=>a.createdAt,cell:a=>s("div",{className:"text-capitalize d-flex flex-column",children:[e("span",{children:Y(a.createdAt).format("MM/DD/YY")}),e("smal",{children:Y(a.createdAt).format("hh:mm A")})]})},{name:"Actions",minWidth:"100px",cell:a=>e("div",{className:"column-action",children:s(D,{children:[e(G,{tag:"div",className:"btn btn-sm",children:e(ge,{size:14,className:"cursor-pointer"})}),s(K,{children:[s(L,{tag:z,className:"w-100",to:`/user/view/${a.id}`,children:[e(U,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Details"})]}),s(L,{tag:z,to:`/user/view/${a.id}&edit=true`,className:"w-100",children:[e(xe,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Edit"})]})]})]})})}],Ee=({store:a,toggleSidebar:c,handlePerPage:h,rowsPerPage:i,handleFilter:v,searchTerm:n})=>{function p(f){let d;const t=",",b=`
`,x=Object.keys(a[0]);return d="",d+=x.join(t),d+=b,f.forEach(r=>{let P=0;x.forEach(C=>{P>0&&(d+=t),d+=r[C],P++}),d+=b}),d}function o(f){const d=document.createElement("a");let t=p(f);if(t===null)return;const b="export.csv";t.match(/^data:text\/csv/i)||(t=`data:text/csv;charset=utf-8,${t}`),d.setAttribute("href",encodeURI(t)),d.setAttribute("download",b),d.click()}return e("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:s(R,{children:[e(y,{xl:"6",className:"d-flex align-items-center p-0",children:s("div",{className:"d-flex align-items-center w-100",children:[e("label",{htmlFor:"rows-per-page",children:"Show"}),s(g,{className:"mx-50",type:"select",id:"rows-per-page",value:i,onChange:h,style:{width:"5rem"},children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]}),e("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),s(y,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[s("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[e("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),e(g,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:n,onChange:f=>v(f.target.value)})]}),s("div",{className:"d-flex align-items-center table-header-actions",children:[s(D,{className:"me-1",children:[s(G,{color:"secondary",caret:!0,outline:!0,children:[e(we,{className:"font-small-4 me-50"}),e("span",{className:"align-middle",children:"Export"})]}),e(K,{children:s(L,{className:"w-100",onClick:()=>o(a),children:[e(U,{className:"font-small-4 me-50"}),e("span",{className:"align-middle",children:"CSV"})]})})]}),e($,{className:"add-new-user",color:"primary",onClick:c,children:"Add New User"})]})]})]})})},$e=({allUserData:a,total:c})=>{const h=O(),[i,v]=m.exports.useState("desc"),[n,p]=m.exports.useState(""),[o,f]=m.exports.useState(1),[d,t]=m.exports.useState("id"),[b,x]=m.exports.useState(!1),[r,P]=m.exports.useState(10),[C,I]=m.exports.useState({value:"",label:"All"}),[w,V]=m.exports.useState({value:"",label:"All"}),[A,H]=m.exports.useState({value:"",label:"All",number:0}),{newUserData:W}=X(l=>l.user),T=()=>x(!b);m.exports.useEffect(()=>{let l,u={page:o,plan:w.value,subStatus:C.value,status:A.value,limit:r,keyword:n};return n?l=setTimeout(()=>{h(F(u))},1500):l=setTimeout(()=>{h(F(u))},100),W&&(T(),l=setTimeout(()=>{h(F(u))},1e3)),()=>{clearTimeout(l)}},[h,o,w,C,r,n,A,W]),m.exports.useEffect(()=>{f(1)},[w,C,A]);const le=[{value:"",label:"All"},{value:"active",label:"Active"},{value:"cancel",label:"Cancelled"}],se=[{value:"",label:"All"},{value:"Creator Monthly Plan",label:"Creator Monthly Plan"},{value:"Agency Monthly Plan",label:"Agency Monthly Plan"},{value:"Company Monthly Plan",label:"Company Monthly Plan"},{value:"Free Trial",label:"Free Trial"}],te=[{value:"",label:"All",number:0},{value:"banned",label:"Banned",number:1},{value:"active",label:"Active",number:2},{value:"inactive",label:"Inactive",number:3},{value:"deactivated",label:"Deactivated",number:4}],re=l=>{f(l.selected+1)},ne=l=>{const u=parseInt(l.currentTarget.value);P(u)},ie=l=>{p(l)},ce=()=>{const l=Number(Math.ceil(c/r));return e(Ae,{previousLabel:"",nextLabel:"",pageCount:l||1,activeClassName:"active",forcePage:o!==0?o-1:0,onPageChange:u=>re(u),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},oe=()=>{const l={role:C.value,currentPlan:w.value,status:A.value,q:n},u=Object.keys(l).some(function(pe){var Z;return((Z=l[pe])==null?void 0:Z.length)>0});return(a==null?void 0:a.length)>0&&!u?a:(a==null?void 0:a.length)===0&&u?[]:a==null?void 0:a.slice(0,r)},de=(l,u)=>{v(u),t(l.sortField)},me=l=>{!l||(l.value!==""&&l.label?I({label:l.label,value:l.value}):I({label:l.label,value:l.value}))},ue=l=>{!l||(l.value!==""&&l.label?V({label:l.label,value:l.value}):V({label:l.label,value:l.value}))},he=l=>{!l||(l.value!==""&&l.label?H({label:l.label,value:l.value}):H({label:l.label,value:l.value}))};return s(m.exports.Fragment,{children:[s(M,{children:[e(ee,{children:e(Ce,{tag:"h4",children:"Filters"})}),e(ae,{children:s(R,{children:[s(y,{md:"4",children:[e(N,{for:"role-select",children:"Subscription Status"}),e(j,{isClearable:!1,value:C||"",options:le,className:"react-select",classNamePrefix:"select",theme:E,onChange:me})]}),s(y,{className:"my-md-0 my-1",md:"4",children:[e(N,{for:"plan-select",children:"Plan"}),e(j,{theme:E,isClearable:!1,className:"react-select",classNamePrefix:"select",options:se,value:w||"",onChange:ue})]}),s(y,{md:"4",children:[e(N,{for:"status-select",children:"User Status"}),e(j,{theme:E,isClearable:!1,className:"react-select",classNamePrefix:"select",options:te,value:A||"",onChange:he})]})]})})]}),e(M,{className:"overflow-hidden",children:e("div",{className:"react-dataTable",children:e(Se,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:je,onSort:de,sortIcon:e(ye,{}),className:"react-dataTable",paginationComponent:ce,data:oe(),subHeaderComponent:e(Ee,{store:a,searchTerm:n,rowsPerPage:r,handleFilter:ie,handlePerPage:ne,toggleSidebar:T})})})}),e(Te,{open:b,toggleSidebar:T})]})},Re=()=>{var v;const a=O(),{allUserData:c,allUserDataLoading:h,allUserDataError:i}=X(n=>n.user);return m.exports.useEffect(()=>{a(F())},[]),s("div",{className:"app-user-list",children:[s(M,{children:[e(ee,{children:e("h5",{children:"User Stats"})}),e(ae,{children:e(R,{children:(v=c==null?void 0:c.stats)==null?void 0:v.map(n=>{let p=null;return n.title==="Total Users"?p=e(Q,{size:15}):n.title==="Active Users"?p=e(ke,{size:15}):p=e(Q,{size:15}),e(y,{lg:"4",sm:"6",children:e(Pe,{className:"shadow-lg",statTitle:n==null?void 0:n.title,icon:p,renderStats:e("h3",{className:"fw-bolder mb-75",children:n==null?void 0:n.count})})})})})})]}),e($e,{allUserData:c==null?void 0:c.data,total:c==null?void 0:c.total})]})};export{Re as default};
