import{r as d,d as o,j as e,I as T,h as A,M as ae,O as w,P as C,Q as y,S as B,av as se,aw as ne,i as le,ax as z,ay as F,C as I,e as re,a2 as ie,l as oe,R as Q,m as O,s as ce,W as me,X as de,Y as ue,Z as pe,a0 as Y,$,az as he,aA as fe}from"./index.dada3145.js";import{S as Ne,A as be}from"./index.82afab70.js";import{u as ge,C as S}from"./index.esm.3d293d18.js";import{S as ve}from"./react-select.esm.a9ad0362.js";import{Q as xe,C as Ce,R as ye}from"./react-dataTable-component.82b17bd8.js";import{w as we,S as Se}from"./sweetalert2-react-content.es.9da5884e.js";import{m as H}from"./moment.b61dc348.js";import{u as Ae,h as De,M as ke,F as je}from"./useQueryParams.c5f1bfab.js";function Te(a,r){if(a==null)return{};var s=Fe(a,r),n,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(l=0;l<c.length;l++)n=c[l],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(a,n)||(s[n]=a[n]))}return s}function Fe(a,r){if(a==null)return{};var s={},n=Object.keys(a),l,c;for(c=0;c<n.length;c++)l=n[c],!(r.indexOf(l)>=0)&&(s[l]=a[l]);return s}var E=d.exports.forwardRef(function(a,r){var s=a.color,n=s===void 0?"currentColor":s,l=a.size,c=l===void 0?24:l,u=Te(a,["color","size"]);return o("svg",{ref:r,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...u,children:[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})});E.propTypes={color:T.exports.string,size:T.exports.oneOfType([T.exports.string,T.exports.number])};E.displayName="Trash2";const ze=E,q={userName:"",firstName:"",lastName:"",email:"",password:""},Be=(a,r,s)=>{for(const n in a)if(typeof a[n]=="object"){if(a[n]===null)return!1}else if(typeof a[n]=="string"&&(a[n].length===0||n==="password"&&(!r.test(a[n])||a[n].length<8)||n==="email"&&!s.test(a[n])))return!1;return!0},Oe=({open:a,toggleSidebar:r,editProfile:s})=>{const n=A();d.exports.useEffect(()=>{s&&(c("firstName",s.firstName),c("lastName",s.lastName),c("userName",s.userName),c("email",s.email))},[s]);const{control:l,setValue:c,setError:u,handleSubmit:D,formState:{errors:p}}=ge({defaultValues:q});return e(Ne,{size:"lg",open:a,title:"New Admin",headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:r,onClosed:()=>{for(const i in q)c(i,"")},children:o(ae,{onSubmit:D(i=>{const f=/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/,k=/^[a-zA-Z0-9._-]+@clatter\.com$/;if(Be(i,f,k))if(s){let m=s.id;i.status=s.status;const b=new FormData;b.append("firstName",i.firstName),b.append("lastName",i.lastName),b.append("email",i.email),b.append("userName",i.userName),b.append("password",i.password),b.append("status",i.status),n(se({formData:b,id:m}))}else n(ne(i));else for(const m in i)i[m]===null&&u(m,{type:"manual"}),i[m]!==null&&i[m].length===0&&u(m,{type:"manual"}),m==="password"&&!f.test(i[m])&&u(m,{type:"Password must contain letters, numbers & periods"}),m==="password"&&i[m].length<8&&u(m,{type:"Password should be 8 characters or more"}),m==="email"&&!k.test(i[m])&&u(m,{type:"manual"})}),children:[o("div",{className:"mb-1",children:[o(w,{className:"form-label",for:"userName",children:["User Name ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"userName",control:l,render:({field:i})=>e(C,{defaultValue:s?s.userName:"",id:"userName",placeholder:"john.doe",invalid:p.userName&&!0,...i})}),p.userName&&e(y,{color:"danger",children:p.userName.type})]}),o("div",{className:"mb-1",children:[o(w,{className:"form-label",for:"firstName",children:["First Name ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"firstName",control:l,render:({field:i})=>e(C,{id:"firstName",defaultValue:s?s.firstName:"",placeholder:"john",invalid:p.firstName&&!0,...i})}),p.firstName&&e(y,{color:"danger",children:p.firstName.type})]}),o("div",{className:"mb-1",children:[o(w,{className:"form-label",for:"lastName",children:["Last Name ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"lastName",control:l,render:({field:i})=>e(C,{id:"lastName",defaultValue:s?s.lastName:"",placeholder:"doe",invalid:p.lastName&&!0,...i})}),p.lastName&&e(y,{color:"danger",children:p.lastName.type})]}),o("div",{className:"mb-1",children:[o(w,{className:"form-label",for:"email",children:["Email ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"email",control:l,render:({field:i})=>e(C,{disabled:!!s,id:"email",defaultValue:s?s.email:"",placeholder:"john.doe@clatter.com",invalid:p.email&&!0,...i})}),p.email&&e(y,{color:"danger",children:p.email.type})]}),o("div",{className:"mb-1",children:[o(w,{className:"form-label",for:"password",children:["Password ",e("span",{className:"text-danger",children:"*"})]}),e(S,{name:"password",control:l,render:({field:i})=>e(C,{type:"password",id:"password",placeholder:"********",invalid:p.password&&!0,...i})}),p.password?e(y,{color:"danger",children:p.password.type}):e(y,{color:"muted",children:"You can use letters, numbers & periods"})]}),e(B,{type:"submit",className:"me-1",color:"primary",children:s?"Update":"ADD"}),e(B,{type:"reset",color:"secondary",outline:!0,onClick:r,children:"Cancel"})]})})},x=we(Se),$e=a=>{var r;if((r=a==null?void 0:a.avatar)!=null&&r.length)return e(Y,{className:"me-1",img:a.avatar,width:"32",height:"32"});{let s=a.firstName+" "+a.lastName;return e(Y,{initials:!0,className:"me-1",color:a.avatarColor||"light-primary",content:s||"John Doe"})}},Ee={active:"light-success",deactivated:"light-warning",inactive:"light-secondary",banned:"light-danger"},Re=({row:a,toggleSidebar:r})=>{const s=A();return o($,{tag:"button",className:"w-100",onClick:()=>{s(z),r(a)},children:[e(ze,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Update"})]})},Le=({row:a})=>{const r=A();return o($,{tag:"button",className:"w-100",onClick:async()=>(r(z),await x.fire({title:"Are you sure?",text:"You will be deleting admin!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete admin!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(n){n.value?(x.fire({icon:"success",title:"Deleted!",text:"Admin has been Deleted.",customClass:{confirmButton:"btn btn-success"}}),r(he(a.id))):n.dismiss===x.DismissReason.cancel&&x.fire({title:"Cancelled",text:"Cancelled Delete :)",icon:"error",customClass:{confirmButton:"btn btn-success"}})})),children:[e(be,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Delete"})]})},Ve=({row:a})=>{const r=A();return o($,{tag:"button",className:"w-100",onClick:async()=>{let n=a.status==="active"?"deactivate":"active";return r(z),await x.fire({title:"Are you sure?",text:`You will ${n} admin!`,icon:"warning",showCancelButton:!0,confirmButtonText:`Yes, ${n} admin!`,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(l){if(l.value){x.fire({icon:"success",title:`${n}d!`,text:`Admin has been ${n}d.`,customClass:{confirmButton:"btn btn-success"}});let c=null;n==="deactivate"?c="deactivated":c="active";let u={id:a.id,status:c};r(fe(u))}else l.dismiss===x.DismissReason.cancel&&x.fire({title:"Cancelled",text:"Cancelled De-activating :)",icon:"error",customClass:{confirmButton:"btn btn-success"}})})},children:[e(je,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:a.status==="active"?"Deactivate":"Activate"})]})},We=({toggleSidebar:a,handlePerPage:r,rowsPerPage:s,handleFilter:n,searchTerm:l})=>e("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:o(Q,{children:[e(O,{xl:"6",className:"d-flex align-items-center p-0",children:o("div",{className:"d-flex align-items-center w-100",children:[e("label",{htmlFor:"rows-per-page",children:"Show"}),o(C,{className:"mx-50",type:"select",id:"rows-per-page",value:s,onChange:r,style:{width:"5rem"},children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]}),e("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),o(O,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[o("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[e("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),e(C,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:l,onChange:c=>n(c.target.value)})]}),e(B,{className:"add-new-user",color:"primary",onClick:a,children:"Add New Admin"})]})]})}),Me=({toggleSidebar:a})=>{const r=A(),[s,n]=d.exports.useState("desc"),[l,c]=d.exports.useState(""),[u,D]=d.exports.useState(1),[p,R]=d.exports.useState("id"),[N,i]=d.exports.useState(10),[f,k]=d.exports.useState(null),[m,b]=d.exports.useState(null),[g,L]=d.exports.useState({value:"",label:"All",number:0}),{getAdminData:v,deleteAdminData:V,deactivateAdminData:W,updateAdminData:M}=le(t=>t.admin);d.exports.useEffect(()=>{const h={...{page:u,status:g.value,limit:N,keyword:l}};Ae(h);const j=De(h);return window.addEventListener("popstate",j),()=>{window.removeEventListener("popstate",j)}},[u,N,l,g,l]),d.exports.useEffect(()=>{if(V||W||M){r(z);let t={page:u,status:g.value,limit:N,keyword:l};r(F(t))}},[V,W,M]),d.exports.useEffect(()=>{v&&(k(v==null?void 0:v.admins),b(v==null?void 0:v.totalAdmins))},[v]),d.exports.useEffect(()=>{let t,h={page:u,status:g.value,limit:N,keyword:l};return l?t=setTimeout(()=>{r(F(h))},3e3):t=setTimeout(()=>{r(F(h))},100),f&&(t=setTimeout(()=>{r(F(h))},1e3)),()=>{clearTimeout(t)}},[r,u,N,l,g,l]),d.exports.useEffect(()=>{D(1)},[g]);const U=[{value:"",label:"All",number:0},{value:"active",label:"Active",number:1},{value:"deactivated",label:"Deactivated",number:2},{value:"deleted",label:"Deleted",number:3}],_=t=>{D(t.selected+1)},Z=t=>{const h=parseInt(t.currentTarget.value);i(h)},G=t=>{c(t)},J=()=>{const t=Number(Math.ceil(m/N));return e(ye,{previousLabel:"",nextLabel:"",pageCount:t||1,activeClassName:"active",forcePage:u!==0?u-1:0,onPageChange:h=>_(h),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},X=()=>{const t={status:g.value,limit:N,q:l},h=Object.keys(t).some(function(j){var P;return((P=t[j])==null?void 0:P.length)>0});return(f==null?void 0:f.length)>0&&!h?f:(f==null?void 0:f.length)===0&&h?[]:f==null?void 0:f.slice(0,N)},K=(t,h)=>{n(h),R(t.sortField)},ee=t=>{!t||(t.value!==""&&t.label?L({label:t.label,value:t.value}):L({label:t.label,value:t.value}))},te=[{name:"Full Name",sortable:!0,minWidth:"300px",sortField:"fullName",selector:t=>t.firstName+t.lastName,cell:t=>o("div",{className:"d-flex justify-content-left align-items-center",children:[$e(t),o("div",{className:"d-flex flex-column",children:[e("div",{className:"user_name text-truncate text-body",children:o("span",{className:"fw-bolder text-capitalize",children:[t.firstName," ",t.lastName]})}),e("small",{className:"text-truncate text-muted mb-0",children:t.email})]})]})},{name:"Status",minWidth:"135px",sortable:!0,sortField:"adminStatus",selector:t=>t.status,cell:t=>e(me,{className:"text-capitalize d-flex flex-column",color:Ee[t.status],pill:!0,children:e("span",{className:"text-capitalize",children:t.status})})},{name:"Role",sortable:!0,minWidth:"130px",sortField:"role",selector:t=>t.role,cell:t=>e("span",{className:"text-capitalize",children:t.role})},{name:"Created At",minWidth:"140px",sortable:!0,sortField:"createdAt",selector:t=>t.createdAt,cell:t=>o("div",{className:"text-capitalize d-flex flex-column",children:[e("span",{children:H(t.createdAt).format("MM/DD/YY")}),e("smal",{children:H(t.createdAt).format("hh:mm A")})]})},{name:"Actions",minWidth:"100px",cell:t=>e("div",{className:"column-action",children:o(de,{children:[e(ue,{tag:"div",className:"btn btn-sm",children:e(ke,{size:14,className:"cursor-pointer"})}),o(pe,{children:[e(Re,{toggleSidebar:a,row:t}),e(Ve,{row:t}),e(Le,{row:t})]})]})})}];return o(d.exports.Fragment,{children:[o(I,{children:[e(re,{children:e(ie,{tag:"h4",children:"Filters"})}),e(oe,{children:e(Q,{children:o(O,{md:"4",children:[e(w,{for:"status-select",children:"Admin Status"}),e(ve,{theme:ce,isClearable:!1,className:"react-select",classNamePrefix:"select",options:U,value:g||"",onChange:ee})]})})})]}),e(I,{className:"overflow-hidden",children:e("div",{className:"react-dataTable",children:e(xe,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:te,onSort:K,sortIcon:e(Ce,{}),className:"react-dataTable",paginationComponent:J,data:X(),subHeaderComponent:e(We,{searchTerm:l,rowsPerPage:N,handleFilter:G,handlePerPage:Z,toggleSidebar:a})})})})]})},Ze=()=>{const[a,r]=d.exports.useState(!1),[s,n]=d.exports.useState(null),l=c=>{c&&n(c),r(!a)};return o("div",{className:"app-user-list",children:[e(Me,{toggleSidebar:l}),e(Oe,{open:a,toggleSidebar:l,editProfile:s})]})};export{Ze as default};
