import{h as M,v as be,j as e,w as Ne,d as s,x as fe,L as p,y as f,I as N,z as w,A as j,D as ge,E as F,G as W,m as Z,U as _,H as q,M as ve,J as G,K as E,O as K,P as xe,Q as B,r as m,i as X,V as P,C as L,e as U,W as Ce,l as D,R as $,n as g,S as T,s as k,X as Se,Y as ye,Z as we,$ as Pe}from"./index.f9cd295b.js";import{S as Ae,a as Y,A as ze}from"./ActiveUser.29443209.js";/* empty css                  */const J={email:"",firstName:"",lastName:"",userName:"",password:"",phoneNumber:""},Fe=(a,c,d)=>{for(const i in a)if(typeof a[i]=="object"){if(a[i]===null)return!1}else if(typeof a[i]=="string"&&(a[i].length===0||i==="password"&&(!c.test(a[i])||a[i].length<8)||i==="phoneNumber"&&(a[i].length<10||a[i].length>16)||i==="email"&&!d.test(a[i])))return!1;return!0},Te=({open:a,toggleSidebar:c})=>{const d=M(),{control:i,setValue:b,setError:r,handleSubmit:h,formState:{errors:o}}=be({defaultValues:J});return e(Ne,{size:"lg",open:a,title:"New User",headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:c,onClosed:()=>{for(const t in J)b(t,"")},children:s(fe,{onSubmit:h(t=>{const v=/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/,y=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;if(Fe(t,v,y))d(ge(t));else for(const n in t)t[n]===null&&r(n,{type:"manual"}),t[n]!==null&&t[n].length===0&&r(n,{type:"manual"}),n==="password"&&!v.test(t[n])&&r(n,{type:"Password must contain letters, numbers & periods"}),n==="password"&&t[n].length<8&&r(n,{type:"Password should be 8 characters or more"}),n==="phoneNumber"&&(t[n].length<10||t[n].length>16)&&r(n,{type:"Please check your contact number"}),n==="email"&&!y.test(t[n])&&r(n,{type:"manual"})}),children:[s("div",{className:"mb-1",children:[s(p,{className:"form-label",for:"userName",children:["Username ",e("span",{className:"text-danger",children:"*"})]}),e(f,{name:"userName",control:i,render:({field:t})=>e(N,{id:"userName",placeholder:"johnDoe99",invalid:o.userName&&!0,...t})})]}),s("div",{className:"mb-1",children:[s(p,{className:"form-label",for:"firstName",children:["First Name ",e("span",{className:"text-danger",children:"*"})]}),e(f,{name:"firstName",control:i,render:({field:t})=>e(N,{id:"firstName",placeholder:"John",invalid:o.firstName&&!0,...t})})]}),s("div",{className:"mb-1",children:[s(p,{className:"form-label",for:"lastName",children:["Last Name ",e("span",{className:"text-danger",children:"*"})]}),e(f,{name:"lastName",control:i,render:({field:t})=>e(N,{id:"lastName",placeholder:"Doe",invalid:o.lastName&&!0,...t})})]}),s("div",{className:"mb-1",children:[s(p,{className:"form-label",for:"email",children:["Email ",e("span",{className:"text-danger",children:"*"})]}),e(f,{name:"email",control:i,render:({field:t})=>e(N,{type:"email",id:"userEmail",placeholder:"john.doe@example.com",invalid:o.email&&!0,...t})}),o.email&&e(w,{color:"danger",children:o.email.type})]}),s("div",{className:"mb-1",children:[s(p,{className:"form-label",for:"password",children:["Password ",e("span",{className:"text-danger",children:"*"})]}),e(f,{name:"password",control:i,render:({field:t})=>e(N,{type:"password",id:"password",placeholder:"********",invalid:o.password&&!0,...t})}),o.password?e(w,{color:"danger",children:o.password.type}):e(w,{color:"muted",children:"You can use letters, numbers & periods"})]}),s("div",{className:"mb-1",children:[s(p,{className:"form-label",for:"phoneNumber",children:["Contact ",e("span",{className:"text-danger",children:"*"})]}),e(f,{name:"phoneNumber",control:i,render:({field:t})=>e(N,{id:"phoneNumber",placeholder:"(397) 294-5153",invalid:o.phoneNumber&&!0,...t})}),o.phoneNumber&&e(w,{color:"danger",children:o.phoneNumber.type})]}),e(j,{type:"submit",className:"me-1",color:"primary",children:"ADD"}),e(j,{type:"reset",color:"secondary",outline:!0,onClick:c,children:"Cancel"})]})})},ke=a=>{var c;if((c=a==null?void 0:a.avatar)!=null&&c.length)return e(B,{className:"me-1",img:a.avatar,width:"32",height:"32"});{let d=a.firstName+" "+a.lastName;return e(B,{initials:!0,className:"me-1",color:a.avatarColor||"light-primary",content:d||"John Doe"})}},Q={active:"light-success",deactivated:"light-warning",inactive:"light-secondary",banned:"light-danger"},je=[{name:"User",sortable:!0,minWidth:"300px",sortField:"fullName",selector:a=>a.firstName+a.lastName,cell:a=>s("div",{className:"d-flex justify-content-left align-items-center",children:[ke(a),s("div",{className:"d-flex flex-column",children:[e(F,{to:`/user/view/${a.id}`,className:"user_name text-truncate text-body",children:s("span",{className:"fw-bolder text-capitalize",children:[a.firstName," ",a.lastName]})}),e("small",{className:"text-truncate text-muted mb-0",children:a.email})]})]})},{name:"User Status",sortable:!0,minWidth:"130px",sortField:"userStatus",selector:a=>a.userStatus,cell:a=>e(W,{className:"text-capitalize d-flex flex-column",color:Q[a.userStatus],pill:!0,children:e("span",{className:"text-capitalize",children:a.userStatus})})},{name:"Plan",minWidth:"135px",sortable:!0,sortField:"currentPlan",selector:a=>a.plan,cell:a=>e("span",{className:"text-capitalize",children:a.plan})},{name:"Subscription Status",minWidth:"140px",sortable:!0,sortField:"subscription",selector:a=>a.subscriptionStatus,cell:a=>e(W,{className:"text-capitalize d-flex flex-column",color:Q[a.subscriptionStatus],pill:!0,children:e("span",{className:"text-capitalize",children:a.subscriptionStatus})})},{name:"Created At",minWidth:"140px",sortable:!0,sortField:"createdAt",selector:a=>a.createdAt,cell:a=>s("div",{className:"text-capitalize d-flex flex-column",children:[e("span",{children:Z(a.createdAt).format("MM/DD/YY")}),e("smal",{children:Z(a.createdAt).format("hh:mm A")})]})},{name:"Actions",minWidth:"100px",cell:a=>e("div",{className:"column-action",children:s(_,{children:[e(q,{tag:"div",className:"btn btn-sm",children:e(ve,{size:14,className:"cursor-pointer"})}),s(G,{children:[s(E,{tag:F,className:"w-100",to:`/user/view/${a.id}`,children:[e(K,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Details"})]}),s(E,{tag:F,to:`/user/view/${a.id}&edit=true`,className:"w-100",children:[e(xe,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Edit"})]})]})]})})}],Ee=({store:a,toggleSidebar:c,handlePerPage:d,rowsPerPage:i,handleFilter:b,searchTerm:r})=>e("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:s($,{children:[e(g,{xl:"6",className:"d-flex align-items-center p-0",children:s("div",{className:"d-flex align-items-center w-100",children:[e("label",{htmlFor:"rows-per-page",children:"Show"}),s(N,{className:"mx-50",type:"select",id:"rows-per-page",value:i,onChange:d,style:{width:"5rem"},children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]}),e("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),s(g,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[s("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[e("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),e(N,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:r,onChange:h=>b(h.target.value)})]}),s("div",{className:"d-flex align-items-center table-header-actions",children:[s(_,{className:"me-1",children:[s(q,{color:"secondary",caret:!0,outline:!0,children:[e(we,{className:"font-small-4 me-50"}),e("span",{className:"align-middle",children:"Export"})]}),e(G,{children:s(E,{className:"w-100",onClick:()=>downloadCSV(a),children:[e(K,{className:"font-small-4 me-50"}),e("span",{className:"align-middle",children:"CSV"})]})})]}),e(j,{className:"add-new-user",color:"primary",onClick:c,children:"Add New User"})]})]})]})}),Le=({allUserData:a,total:c})=>{const d=M(),[i,b]=m.exports.useState("desc"),[r,h]=m.exports.useState(""),[o,A]=m.exports.useState(1),[ee,t]=m.exports.useState("id"),[v,y]=m.exports.useState(!1),[n,ae]=m.exports.useState(10),[x,R]=m.exports.useState({value:"",label:"All"}),[C,I]=m.exports.useState({value:"",label:"All"}),[S,O]=m.exports.useState({value:"",label:"All",number:0}),{newUserData:H}=X(l=>l.user),z=()=>y(!v);m.exports.useEffect(()=>{let l,u={page:o,plan:C.value,subStatus:x.value,status:S.value,limit:n,keyword:r};return r?l=setTimeout(()=>{d(P(u))},1e3):l=setTimeout(()=>{d(P(u))},100),H&&(z(),l=setTimeout(()=>{d(P(u))},1e3)),()=>{clearTimeout(l)}},[d,o,C,x,n,r,S,H]),m.exports.useEffect(()=>{A(1)},[C,x,S]);const le=[{value:"",label:"All"},{value:"active",label:"Active"},{value:"cancel",label:"Cancel"},{value:"expire",label:"Expire"}],se=[{value:"",label:"All"},{value:"Creator Monthly Plan",label:"Creator Monthly Plan"},{value:"Agency Monthly Plan",label:"Agency Monthly Plan"},{value:"Company Monthly Plan",label:"Company Monthly Plan"},{value:"Free Trial",label:"Free Trial"}],te=[{value:"",label:"All",number:0},{value:"banned",label:"Banned",number:1},{value:"active",label:"Active",number:2},{value:"inactive",label:"Inactive",number:3},{value:"deactivated",label:"Deactivated",number:4}],re=l=>{A(l.selected+1)},ne=l=>{const u=parseInt(l.currentTarget.value);ae(u)},ie=l=>{h(l)},ce=()=>{const l=Number(Math.ceil(c/n));return e(Pe,{previousLabel:"",nextLabel:"",pageCount:l||1,activeClassName:"active",forcePage:o!==0?o-1:0,onPageChange:u=>re(u),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},oe=()=>{const l={role:x.value,currentPlan:C.value,status:S.value,q:r},u=Object.keys(l).some(function(pe){var V;return((V=l[pe])==null?void 0:V.length)>0});return(a==null?void 0:a.length)>0&&!u?a:(a==null?void 0:a.length)===0&&u?[]:a==null?void 0:a.slice(0,n)},de=(l,u)=>{b(u),t(l.sortField)},me=l=>{!l||(l.value!==""&&l.label?R({label:l.label,value:l.value}):R({label:l.label,value:l.value}))},ue=l=>{!l||(l.value!==""&&l.label?I({label:l.label,value:l.value}):I({label:l.label,value:l.value}))},he=l=>{!l||(l.value!==""&&l.label?O({label:l.label,value:l.value}):O({label:l.label,value:l.value}))};return s(m.exports.Fragment,{children:[s(L,{children:[e(U,{children:e(Ce,{tag:"h4",children:"Filters"})}),e(D,{children:s($,{children:[s(g,{md:"4",children:[e(p,{for:"role-select",children:"Subscription Status"}),e(T,{isClearable:!1,value:x||"",options:le,className:"react-select",classNamePrefix:"select",theme:k,onChange:me})]}),s(g,{className:"my-md-0 my-1",md:"4",children:[e(p,{for:"plan-select",children:"Plan"}),e(T,{theme:k,isClearable:!1,className:"react-select",classNamePrefix:"select",options:se,value:C||"",onChange:ue})]}),s(g,{md:"4",children:[e(p,{for:"status-select",children:"User Status"}),e(T,{theme:k,isClearable:!1,className:"react-select",classNamePrefix:"select",options:te,value:S||"",onChange:he})]})]})})]}),e(L,{className:"overflow-hidden",children:e("div",{className:"react-dataTable",children:e(Se,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:je,onSort:de,sortIcon:e(ye,{}),className:"react-dataTable",paginationComponent:ce,data:oe(),subHeaderComponent:e(Ee,{store:a,searchTerm:r,rowsPerPage:n,handleFilter:ie,handlePerPage:ne,toggleSidebar:z})})})}),e(Te,{open:v,toggleSidebar:z})]})},Ie=()=>{var b;const a=M(),{allUserData:c,allUserDataLoading:d,allUserDataError:i}=X(r=>r.user);return m.exports.useEffect(()=>{a(P())},[]),s("div",{className:"app-user-list",children:[s(L,{children:[e(U,{children:e("h5",{children:"User Stats"})}),e(D,{children:e($,{children:(b=c==null?void 0:c.stats)==null?void 0:b.map(r=>{let h=null;return r.title==="Total Users"?h=e(Y,{size:15}):r.title==="Active Users"?h=e(ze,{size:15}):h=e(Y,{size:15}),e(g,{lg:"4",sm:"6",children:e(Ae,{className:"shadow-lg",statTitle:r==null?void 0:r.title,icon:h,renderStats:e("h3",{className:"fw-bolder mb-75",children:r==null?void 0:r.count})})})})})})]}),e(Le,{allUserData:c==null?void 0:c.data,total:c==null?void 0:c.total})]})};export{Ie as default};
