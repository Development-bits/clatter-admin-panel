import{h as I,v as Ne,j as e,w as ve,d as l,x as ge,L as b,y,I as x,z as F,A as O,D as xe,E as k,G as B,m as Y,U as K,H as X,M as Se,J as D,K as M,O as U,P as Ce,Q as J,r as u,i as ee,V as ye,W as we,X as A,C as $,e as ae,Y as Pe,l as se,R as V,n as w,S as E,s as L,Z as Ae,$ as ze,a0 as Fe,a1 as je,a2 as Te}from"./index.03862e2e.js";import{S as ke,a as Q,A as Ee}from"./ActiveUser.0d6a3568.js";/* empty css                  */const _={email:"",firstName:"",lastName:"",userName:"",password:"",phoneNumber:""},Le=(a,n,h)=>{for(const t in a)if(typeof a[t]=="object"){if(a[t]===null)return!1}else if(typeof a[t]=="string"&&(a[t].length===0||t==="password"&&(!n.test(a[t])||a[t].length<8)||t==="phoneNumber"&&(a[t].length<10||a[t].length>16)||t==="email"&&!h.test(a[t])))return!1;return!0},Oe=({open:a,toggleSidebar:n})=>{const h=I(),{control:t,setValue:S,setError:i,handleSubmit:d,formState:{errors:m}}=Ne({defaultValues:_});return e(ve,{size:"lg",open:a,title:"New User",headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:n,onClosed:()=>{for(const r in _)S(r,"")},children:l(ge,{onSubmit:d(r=>{const z=/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/,P=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;if(Le(r,z,P))h(xe(r));else for(const c in r)r[c]===null&&i(c,{type:"manual"}),r[c]!==null&&r[c].length===0&&i(c,{type:"manual"}),c==="password"&&!z.test(r[c])&&i(c,{type:"Password must contain letters, numbers & periods"}),c==="password"&&r[c].length<8&&i(c,{type:"Password should be 8 characters or more"}),c==="phoneNumber"&&(r[c].length<10||r[c].length>16)&&i(c,{type:"Please check your contact number"}),c==="email"&&!P.test(r[c])&&i(c,{type:"manual"})}),children:[l("div",{className:"mb-1",children:[l(b,{className:"form-label",for:"userName",children:["Username ",e("span",{className:"text-danger",children:"*"})]}),e(y,{name:"userName",control:t,render:({field:r})=>e(x,{id:"userName",placeholder:"johnDoe99",invalid:m.userName&&!0,...r})})]}),l("div",{className:"mb-1",children:[l(b,{className:"form-label",for:"firstName",children:["First Name ",e("span",{className:"text-danger",children:"*"})]}),e(y,{name:"firstName",control:t,render:({field:r})=>e(x,{id:"firstName",placeholder:"John",invalid:m.firstName&&!0,...r})})]}),l("div",{className:"mb-1",children:[l(b,{className:"form-label",for:"lastName",children:["Last Name ",e("span",{className:"text-danger",children:"*"})]}),e(y,{name:"lastName",control:t,render:({field:r})=>e(x,{id:"lastName",placeholder:"Doe",invalid:m.lastName&&!0,...r})})]}),l("div",{className:"mb-1",children:[l(b,{className:"form-label",for:"email",children:["Email ",e("span",{className:"text-danger",children:"*"})]}),e(y,{name:"email",control:t,render:({field:r})=>e(x,{type:"email",id:"userEmail",placeholder:"john.doe@example.com",invalid:m.email&&!0,...r})}),m.email&&e(F,{color:"danger",children:m.email.type})]}),l("div",{className:"mb-1",children:[l(b,{className:"form-label",for:"password",children:["Password ",e("span",{className:"text-danger",children:"*"})]}),e(y,{name:"password",control:t,render:({field:r})=>e(x,{type:"password",id:"password",placeholder:"********",invalid:m.password&&!0,...r})}),m.password?e(F,{color:"danger",children:m.password.type}):e(F,{color:"muted",children:"You can use letters, numbers & periods"})]}),l("div",{className:"mb-1",children:[l(b,{className:"form-label",for:"phoneNumber",children:["Contact ",e("span",{className:"text-danger",children:"*"})]}),e(y,{name:"phoneNumber",control:t,render:({field:r})=>e(x,{id:"phoneNumber",placeholder:"(397) 294-5153",invalid:m.phoneNumber&&!0,...r})}),m.phoneNumber&&e(F,{color:"danger",children:m.phoneNumber.type})]}),e(O,{type:"submit",className:"me-1",color:"primary",children:"ADD"}),e(O,{type:"reset",color:"secondary",outline:!0,onClick:n,children:"Cancel"})]})})},Me=a=>{var n;if((n=a==null?void 0:a.avatar)!=null&&n.length)return e(J,{className:"me-1",img:a.avatar,width:"32",height:"32"});{let h=a.firstName+" "+a.lastName;return e(J,{initials:!0,className:"me-1",color:a.avatarColor||"light-primary",content:h||"John Doe"})}},G={active:"light-success",deactivated:"light-warning",inactive:"light-secondary",banned:"light-danger"},$e=[{name:"User",sortable:!0,minWidth:"260px",sortField:"fullName",selector:a=>a.firstName+a.lastName,cell:a=>l("div",{className:"d-flex justify-content-left align-items-center",children:[Me(a),l("div",{className:"d-flex flex-column",children:[e(k,{to:`/user/view/${a.id}`,className:"user_name text-truncate text-body",children:l("span",{className:"fw-bolder text-capitalize",children:[a.firstName," ",a.lastName]})}),e("small",{className:"text-truncate text-muted mb-0",children:a.email})]})]})},{name:"Status",sortable:!0,minWidth:"100px",sortField:"userStatus",selector:a=>a.userStatus,cell:a=>e(B,{className:"text-capitalize d-flex flex-column",color:G[a.userStatus],pill:!0,children:e("span",{className:"text-capitalize",children:a.userStatus})})},{name:"Plan",minWidth:"135px",sortable:!0,sortField:"currentPlan",selector:a=>a.plan,cell:a=>e("span",{className:"text-capitalize",children:a.plan})},{name:"Subscription Status",minWidth:"140px",sortable:!0,sortField:"subscription",selector:a=>a.subscriptionStatus,cell:a=>e(B,{className:"text-capitalize d-flex flex-column",color:G[a.subscriptionStatus],pill:!0,children:e("span",{className:"text-capitalize",children:a.subscriptionStatus})})},{name:"Created At",minWidth:"100px",sortable:!0,sortField:"createdAt",selector:a=>a.createdAt,cell:a=>l("div",{className:"text-capitalize d-flex flex-column",children:[e("span",{children:Y(a.createdAt).format("MM/DD/YY")}),e("smal",{children:Y(a.createdAt).format("hh:mm A")})]})},{name:"Actions",minWidth:"100px",cell:a=>e("div",{className:"column-action",children:l(K,{children:[e(X,{tag:"div",className:"btn btn-sm",children:e(Se,{size:14,className:"cursor-pointer"})}),l(D,{children:[l(M,{tag:k,className:"w-100",to:`/user/view/${a.id}`,children:[e(U,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Details"})]}),l(M,{tag:k,to:`/user/view/${a.id}&edit=true`,className:"w-100",children:[e(Ce,{size:14,className:"me-50"}),e("span",{className:"align-middle",children:"Edit"})]})]})]})})}],Ie=({store:a,toggleSidebar:n,handlePerPage:h,rowsPerPage:t,handleFilter:S,handleDownloadCSV:i,searchTerm:d})=>e("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:l(V,{children:[e(w,{xl:"6",className:"d-flex align-items-center p-0",children:l("div",{className:"d-flex align-items-center w-100",children:[e("label",{htmlFor:"rows-per-page",children:"Show"}),l(x,{className:"mx-50",type:"select",id:"rows-per-page",value:t,onChange:h,style:{width:"5rem"},children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]}),e("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),l(w,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[l("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[e("label",{className:"mb-0",htmlFor:"search-invoice",children:"Search:"}),e(x,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:d,onChange:m=>S(m.target.value)})]}),l("div",{className:"d-flex align-items-center table-header-actions",children:[l(K,{className:"me-1",children:[l(X,{color:"secondary",caret:!0,outline:!0,children:[e(Fe,{className:"font-small-4 me-50"}),e("span",{className:"align-middle",children:"Export"})]}),e(D,{children:l(M,{className:"w-100",onClick:()=>i(),children:[e(U,{className:"font-small-4 me-50"}),e("span",{className:"align-middle",children:"CSV"})]})})]}),e(O,{className:"add-new-user",color:"primary",onClick:n,children:"Add New User"})]})]})]})}),Ve=({allUserData:a,total:n,url:h})=>{const t=I(),[S,i]=u.exports.useState("desc"),[d,m]=u.exports.useState(""),[f,j]=u.exports.useState(1),[r,z]=u.exports.useState("id"),[P,c]=u.exports.useState(!1),[N,le]=u.exports.useState(10),[v,W]=u.exports.useState({value:"",label:"All"}),[g,H]=u.exports.useState({value:"",label:"All"}),[C,R]=u.exports.useState({value:"",label:"All",number:0}),{newUserData:Z}=ee(s=>s.user),T=()=>c(!P),te=()=>{let s={page:f,plan:g.value,status:C.value,subStatus:v.value,keyword:d,limit:N,flag:"getCSV"},o={};Object.keys(s).forEach(p=>{s[p]!==void 0&&s[p]!==null&&(o[p]=s[p])}),t(A(o))};u.exports.useEffect(()=>{if(h!=null){debugger;ye(h)}},[h]),u.exports.useEffect(()=>{const o={...{page:f,plan:g.value,status:C.value,subStatus:v.value,keyword:d,limit:N}};we(o);const p=je(o);return window.addEventListener("popstate",p),()=>{window.removeEventListener("popstate",p)}},[f,g,v,d,N]),u.exports.useEffect(()=>{let s,o={page:f,plan:g.value,status:C.value,subStatus:v.value,keyword:d,limit:N};return d?s=setTimeout(()=>{t(A(o))},1e3):s=setTimeout(()=>{t(A(o))},100),Z&&(T(),s=setTimeout(()=>{t(A(o))},1e3)),()=>{clearTimeout(s)}},[t,f,g,v,N,d,C,Z]),u.exports.useEffect(()=>{j(1)},[g,v,C]);const re=[{value:"",label:"All"},{value:"active",label:"Active"},{value:"cancel",label:"Cancel"},{value:"expired",label:"Expired"}],ne=[{value:"",label:"All"},{value:"Creator Monthly Plan",label:"Creator Monthly Plan"},{value:"Agency Monthly Plan",label:"Agency Monthly Plan"},{value:"Company Monthly Plan",label:"Company Monthly Plan"},{value:"Free Trial",label:"Free Trial"}],ie=[{value:"",label:"All",number:0},{value:"banned",label:"Banned",number:1},{value:"active",label:"Active",number:2},{value:"inactive",label:"Inactive",number:3},{value:"deactivated",label:"Deactivated",number:4}],ce=s=>{j(s.selected+1)},oe=s=>{const o=parseInt(s.currentTarget.value);le(o)},de=s=>{m(s)},me=()=>{const s=Number(Math.ceil(n/N));return e(Te,{previousLabel:"",nextLabel:"",pageCount:s||1,activeClassName:"active",forcePage:f!==0?f-1:0,onPageChange:o=>ce(o),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},ue=()=>{const s={role:v.value,currentPlan:g.value,status:C.value,q:d},o=Object.keys(s).some(function(p){var q;return((q=s[p])==null?void 0:q.length)>0});return(a==null?void 0:a.length)>0&&!o?a:(a==null?void 0:a.length)===0&&o?[]:a==null?void 0:a.slice(0,N)},he=(s,o)=>{i(o),z(s.sortField)},pe=s=>{!s||(s.value!==""&&s.label?W({label:s.label,value:s.value}):W({label:s.label,value:s.value}))},be=s=>{!s||(s.value!==""&&s.label?H({label:s.label,value:s.value}):H({label:s.label,value:s.value}))},fe=s=>{!s||(s.value!==""&&s.label?R({label:s.label,value:s.value}):R({label:s.label,value:s.value}))};return l(u.exports.Fragment,{children:[l($,{children:[e(ae,{children:e(Pe,{tag:"h4",children:"Filters"})}),e(se,{children:l(V,{children:[l(w,{md:"4",children:[e(b,{for:"role-select",children:"Subscription Status"}),e(E,{isClearable:!1,value:v||"",options:re,className:"react-select",classNamePrefix:"select",theme:L,onChange:pe})]}),l(w,{className:"my-md-0 my-1",md:"4",children:[e(b,{for:"plan-select",children:"Plan"}),e(E,{theme:L,isClearable:!1,className:"react-select",classNamePrefix:"select",options:ne,value:g||"",onChange:be})]}),l(w,{md:"4",children:[e(b,{for:"status-select",children:"User Status"}),e(E,{theme:L,isClearable:!1,className:"react-select",classNamePrefix:"select",options:ie,value:C||"",onChange:fe})]})]})})]}),e($,{className:"overflow-hidden",children:e("div",{className:"react-dataTable",children:e(Ae,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,columns:$e,onSort:he,sortIcon:e(ze,{}),className:"react-dataTable",paginationComponent:me,data:ue(),subHeaderComponent:e(Ie,{handleDownloadCSV:te,store:a,searchTerm:d,rowsPerPage:N,handleFilter:de,handlePerPage:oe,toggleSidebar:T})})})}),e(Oe,{open:P,toggleSidebar:T})]})},Ze=()=>{var S;const a=I(),{allUserData:n,allUserDataLoading:h,allUserDataError:t}=ee(i=>i.user);return u.exports.useEffect(()=>{a(A())},[]),l("div",{className:"app-user-list",children:[l($,{children:[e(ae,{children:e("h5",{children:"User Stats"})}),e(se,{children:e(V,{children:(S=n==null?void 0:n.stats)==null?void 0:S.map(i=>{let d=null;return i.title==="Total Users"?d=e(Q,{size:15}):i.title==="Active Users"?d=e(Ee,{size:15}):d=e(Q,{size:15}),e(w,{lg:"4",sm:"6",children:e(ke,{className:"shadow-lg",statTitle:i==null?void 0:i.title,icon:d,renderStats:e("h3",{className:"fw-bolder mb-75",children:i==null?void 0:i.count})})})})})})]}),e(Ve,{allUserData:n==null?void 0:n.data,total:n==null?void 0:n.total,url:n==null?void 0:n.url})]})};export{Ze as default};
